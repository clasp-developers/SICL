\chapter{Translating AST to HIR}
\label{chap-translating-ast-to-hir}

The translation of an abstract syntax tree
\seechap{chap-abstract-syntax-tree} to high-level intermediate
representation \seechap{chap-ir} is done by an algorithm that is
similar to that of CPS-conversion.%
\footnote{CPS means Continuation Passing Style.}

As with CPS-conversion, translation makes the control structure
explicit.  Another similarity is that translation is done from the end
of the program to the beginning.

\section{\asdf{} system name}

The name of the \asdf{} system that accomplishes the translation of an
abstract syntax tree into HIR is called \texttt{cleavir-ast-to-hir}
and it is located in the file \texttt{cleavir-ast-to-hir.asd} in the
sub-directory named \texttt{AST-to-HIR}.

\section{Package}

The name of the package that contains the names specific to this
system is \texttt{cleavir-ast-to-hir}.  It is defined in the file
named \texttt{packages.lisp} in the sub-directory named
\texttt{AST-to-HIR}.

\section{Compilation context}

Translation of a form is accomplished with respect to a
\emph{compilation context}.  This context contains a \emph{list of
  lexical variables} to which the values of the translated AST must be
assigned.  The length of the list corresponds to the number of values
required by the context.  The context also contains a \emph{list of
  successors} which represent MIR instructions to which transfer
control after evaluation of the current AST.

\Defclass {context}

This class is the base class for compilation contexts.

\Definitarg {:results}

\Definitarg {:successors}

\Definitarg {:speed-value}

\Definitarg {:debug-value}

\Definitarg {:safety-value}

\Definitarg {:space-value}

\Definitarg {:compilation-speed-value}
